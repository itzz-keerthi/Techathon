<html>
    <head>
        <title>
            Starter
        </title>  
        <link rel="stylesheet" href="soup.css">  
    </head> 
    <body>
        <table id="table" align="center">
        <form > 
          
            <tr><thcolspan="3" align="center"><h1>VEG SPECIAL</h1></tr>
            <tr>
                <th><img src="idly.avif" height="200px" width="300px">
                <th><em>Idly</em><hr>
                <th><input type="number" id = "idlycount"value="1"  min="1" max="20"> 
                <th><em>Rs.30</em>
                <th><button id="idly" class="btnn" type="button">Add</button>       
            </tr>
            <tr>
                <th><img src="dosa1.jpg" height="200px" width="300px">
                <th><em>Dosa</em><hr>
                <th><input type="number" id="dosacount" value="1"  min="1" max="20"> 
                <th><em>Rs.60</em>
                <th><button id="dosa" href="restaurantmenu.html" type="button">Add</button>        
            </tr>
            <tr>
                <th><img src="Chapati.jpg"height="200px" width="300px">
                <th><em>Chappathi</em><hr>
                <th><input type="number" id="chappathicount" value="1"  min="1" max="20"> 
                <th><em>Rs.50</em>
                    <th><button id="chappathi" href="restaurantmenu.html" type="button">Add</button>          
            </tr>
            <tr>
                <th><img src="pongal1.webp" height="200px" width="300px">
                <th><em>Pongal</em><hr>
                <th><input type="number" id = "pongalcount" value="1"  min="1" max="20">    
                <th><em>Rs.45</em>
                    <th><button id="pongal" href="restaurantmenu.html" type="button">Add</button>  
            </tr>
            <tr>
                <th><img src="cholapoori.webp"height="200px" width="300px">
                <th><em>Cholapoori</em><hr>
                <th><input type="number" id="cholapooricount" value="1"  min="1" max="20"> 
                <th><em>Rs.70</em>
                    <th><button id="cholapoori" href="restaurantmenu.html" type="button">Add</button>        
            </tr>
            <tr>
                <th><img src="sambar-vada.jpg"height="200px" width="300px">
                <th><em>Sambar vada</em><hr>
                <th><input type="number" id="sambarvadacount" value="1" min="1" max="20"> 
                <th><em>Rs.35</em>
                    <th><button id="sambarvada" type="button">Add</button>            
            </tr>
            <tr>
                <th><img src="idiyappam.jpg"height="200px" width="300px">
                <th><em>Idiyappam</em><hr>
                <th><input type="number" value="1" min="1" max="20"> 
                <th><em>Rs.30</em>
                    <th><button id="idiyappam" type="button">Add</button>           
            </tr>
            <tr>
                <th><img src="veg-pulao.jpg"height="200px" width="300px">
                <th><em>Veg pulao</em><hr>
                <th><input type="number" value="1" min="1" max="20"> 
                <th><em>Rs.60</em>
                    <th><button id="veg pulao" type="button">Add</button>            
            </tr>
            <tr>
                <th><img src="sambarrice.webp"height="200px" width="300px">
                <th><em>Sambar rice</em><hr>
                <th><input type="number" value="1" min="1" max="20"> 
                <th><em>Rs.50</em>
                    <th><button id="sambar rice" type="button">Add</button>           
            </tr>
            <tr>
                <th><img src="Curd_Rice.jpg"height="200px" width="300px">
                <th><em>Curd rice</em><hr>
                <th><input type="number" value="1" min="1" max="20"> 
                <th><em>Rs.50</em>
                    <th><button id="curd rice" type="button">Add</button>            
            </tr>
            <tr>
                <th><img src="tamarind_rice.jpg"height="200px" width="300px">
                <th><em>Tamarind rice</em><hr>
                <th><input type="number" value="1" min="1" max="20"> 
                <th><em>Rs.40</em>
                    <th><button id="Tamarind rice" type="button">Add</button>            
            </tr>
            <tr>
                <th><img src="fried-rice.jpg"height="200px" width="300px">
                <th><em>Veg fried rice</em><hr>
                <th><input type="number" value="1" min="1" max="20"> 
                <th><em>Rs.80</em>
                    <th><button id="fried rice" type="button">Add</button>            
            </tr>
            <tr>
                <th><img src="spicy-mushroom-fried-rice-2.jpg"height="200px" width="300px">
                <th><em>Mushroom fried rice</em><hr>
                <th><input type="number" value="1" min="1" max="20"> 
                <th><em>Rs.90</em>
                    <th><button id="mushroom rice" type="button">Add</button>            
            </tr>
            <tr>
                <th><img src="cauliflower-fried-rice.jpg"height="200px" width="300px">
                <th><em>Gobi rice</em><hr>
                <th><input type="number" value="1" min="1" max="20"> 
                <th><em>Rs.80</em>
                    <th><button id="gobi rice" type="button">Add</button>           
            </tr>
            <tr>
                <th><img src="veg_noodles.jpg"height="200px" width="300px">
                <th><em>Veg noodles</em><hr>
                <th><input type="number" value="1" min="1" max="20"> 
                <th><em>Rs.75</em>
                    <th><button id="veg noodles" type="button">Add</button>            
            </tr>
            <tr>
                <th><img src="mushroom_noodles.webp"height="200px" width="300px">
                <th><em>Mushroom noodles</em><hr>
                <th><input type="number" value="1" min="1" max="20"> 
                <th><em>Rs.80</em>
                    <th><button id="mushroom noodles" type="button">Add</button>            
            </tr>
            

            <tr>
                <th colspan="4" align="center"><a id="button" href="restaurantmenu.html">Add to order</a>
            </tr>
            <tr>
                <th colspan="4" align="center"><hr>
                </tr>        

            
        </form> 
        
         
        </table>     
    </body>   
</html>    

<script type = "module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-analytics.js";
    
    import {
      getAuth, onAuthStateChanged
    } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-auth.js";
    import {
      getDatabase,
      set,
      ref,
      update,
    } from "https://www.gstatic.com/firebasejs/9.13.0/firebase-database.js";
  
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyDjToIub_kOd6334ksEabRIUiN_UtPXtTw",
      authDomain: "fir-7d9ee.firebaseapp.com",
      projectId: "fir-7d9ee",
      storageBucket: "fir-7d9ee.appspot.com",
      messagingSenderId: "493771331329",
      appId: "1:493771331329:web:bfc2182cd7cc18ef40ed00",
      measurementId: "G-8B04P7MD0P",
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
  
    const auth = getAuth(app);
    const database = getDatabase(app);

    var idly = document.getElementById('idly');
    var dosa = document.getElementById('dosa');
   /* 
    function test(){

      alert('test')
    }
*/
    
onAuthStateChanged(auth, (user) => {
  if (user) {
    // User is signed in, see docs for a list of available properties
    // https://firebase.google.com/docs/reference/js/firebase.User
    const uid = user.uid;
    // ...
  } else {
    // User is signed out
    // ...
  }
});

    // idly.addEventListener("click", (event) =>{
    //   alert("test");
    // })
    idly.addEventListener("click", (e) => {

      // alert(error);
      var count = document.getElementById("idlycount").value;
      var price = 30;
      //const user = userCredential.user;
      const user = auth.currentUser;
      update(ref(database, "users/" + user.uid +"/idly/"), {
          count: count,
          tot_price: count*30,
        })
          .then(() => {
            // Data saved successfully!
            
            alert(count+" Idlies added Successfully");
          })
          .catch((error) => {
            // The write failed...
            alert(error);
          });
          window.location.replace("restaurantmenu.html");
    });

    
    dosa.addEventListener("click", (e) => {
      var count = document.getElementById("dosacount").value;
      var price = 60;
      const user = auth.currentUser;
      update(ref(database, "users/" + user.uid +"/dosa/"), {
          count: count,
          tot_price: count*price,
        })
          .then(() => {
            // Data saved successfully!
            //window.location.replace("welcome.html");
            
            alert(count+" Dosas added Successfully");
          })
          .catch((error) => {
            // The write failed...
            alert(error);
          });
          window.location.replace("restaurantmenu.html");
    });

    chappathi.addEventListener("click", (e) => {
      var count = document.getElementById("idlycount").value;
      var price = 50;
      const user = userCredential.user;
      update(ref(database, "users/" + user.uid +"/chappathi/"), {
          count: count,
          tot_price: count*50,
        })
          .then(() => {
            // Data saved successfully!
            //window.location.replace("welcome.html");
            alert(count+" Chappathis added Successfully");
          })
          .catch((error) => {
            // The write failed...
            alert(error);
          });
          window.location.replace("restaurantmenu.html");

    });


</script>